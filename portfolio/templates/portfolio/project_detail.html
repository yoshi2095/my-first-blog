{% extends 'portfolio/base.html' %}
{% block content %}
	
	<div class="project">

		
		<h1>{{ project.title }}</h1>
		
		<p>{{ project.text|linebreaksbr }}</p>
		
		{% if project.published_date %}
		<div class="date">
			{{ project.published_date }}			
		</div>
		{% else %}
			<a class="btn btn-default" href="{% url 'project_publish' pk=project.pk %}">Publish</a>
		{% endif %}
		
		{% if user.is_authenticated %}
		<a class="btn btn-default" href="{% url 'project_edit' pk=project.pk %}"><span class="glyphicon glyphicon-pencil"></span></a>
		<a class="btn btn-default" href="{% url 'project_remove' pk=project.pk %}"><span class="glyphicon glyphicon-remove"></span></a>
		{% endif %}

	</div>

	<hr>

	<a class="btn btn-default" href="{% url 'add_comment_to_project' pk=project.pk %}">Add Comment</a>

	{% for comment in project.comments.all %}

		{% if user.is_authenticated or comment.approved_comment %}

			<div class="comment">
				<strong>{{ comment.author }}</strong>
				<p>{{ comment.text|linebreaks }}</p>
				<div class="date">
					{{ comment.created_date }}
					{% if not comment.approved_comment %}
						<a class="btn btn-default" href="{% url 'comment_remove' pk=comment.pk %}"><span class="glyphicon glyphicon-remove"></span></a>
	                	<a class="btn btn-default" href="{% url 'comment_approve' pk=comment.pk %}"><span class="glyphicon glyphicon-ok"></span></a>
	                {% endif %}
				</div>
			</div>

		{% endif %}

	{% empty %}
	
		<p>No comments here yet :(</p>

	{% endfor %}
	
	
{% endblock %}